---
import Header from "../components/Header.astro";
import BlogCard from "../components/BlogCard.astro";
import ProjectCard from "../components/ProjectCard.astro";
import { getCollection } from "astro:content";
import experiencesData from "../data/experiences.json";
import educationData from "../data/education.json";
import certificatesData from "../data/certificates.json";

// Load data from JSON files
const experiences = experiencesData.sort((a, b) => 
  new Date(b.startDate).getTime() - new Date(a.startDate).getTime()
);
const educationItems = educationData.sort((a, b) => 
  new Date(b.startDate).getTime() - new Date(a.startDate).getTime()
);
const certificates = certificatesData.sort((a, b) => 
  new Date(b.date).getTime() - new Date(a.date).getTime()
);

const latestPosts = (await getCollection("posts"))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 3);

const latestProjects = (await getCollection("projects"))
  .filter((project) => !project.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 3);
---

<!DOCTYPE html>
<html lang="en">
  <Header title="Firdaus Nuur Rhamadhan - IoT Engineer & Full-Stack Developer" />
  <body class="bg-[#FFF8F0] text-gray-900">
    <div class="max-w-5xl mx-auto px-6 py-12">
      
      <!-- Hero Section -->
      <section class="mb-16 grid md:grid-cols-2 gap-8 items-start">
        <!-- Profile Image with decorative elements -->
        <div class="relative">
          <div class="relative inline-block">
            <!-- Decorative circle background -->
            <div class="absolute -top-4 -left-4 w-64 h-64 bg-[#E8DFF5] rounded-full -z-10"></div>
            <!-- Profile Image -->
            <img 
              src="/assets/Daus.jpg" 
              alt="Firdaus Nuur Rhamadhan" 
              class="w-56 h-56 object-cover border-4 border-black relative z-10 animate-fade-in"
            />
            <!-- Decorative stars -->
            <div class="absolute -bottom-6 -left-6 text-6xl animate-float" style="animation-delay: 0.2s;">‚ú®</div>
            <div class="absolute -top-2 -right-4 text-4xl animate-float" style="animation-delay: 0.5s;">‚ú®</div>
          </div>
        </div>

        <!-- Intro Text -->
        <div class="space-y-6 animate-slide-in-right">
          <!-- Speech bubble -->
          <div class="inline-block px-6 py-3 bg-white border-3 border-black rounded-full shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] animate-bounce-subtle">
            <h1 class="text-2xl font-bold">hi there!</h1>
          </div>

          <div class="space-y-4">
            <p class="text-lg leading-relaxed">
              I am <span class="font-bold text-[#c678dd]">Firdaus Nuur Rhamadhan</span>, a tech-savvy 
              <span class="font-bold text-[#61afef]">IoT Engineer</span> and 
              <span class="font-bold text-[#98c379]">Full-Stack Developer</span> specializing in 
              <span class="font-bold text-[#e06c75]">AI (Computer Vision)</span>. 
              Skilled in hardware‚Äìsoftware integration, cloud-based IoT, and scalable web applications.
            </p>
            <hr class="border-t-2 border-black" />
          </div>

          <!-- Contact Info -->
          <div class="space-y-3">
            <a href="https://www.linkedin.com/in/nuurrhama" target="_blank" rel="noopener" 
               class="flex items-center gap-3 text-[#61afef] hover:text-[#528bcc] transition-colors group">
              <span class="text-2xl group-hover:scale-110 transition-transform">üîó</span>
              <span class="font-mono">linkedin.com/in/nuurrhama</span>
            </a>
            <a href="tel:+6281234567890" 
               class="flex items-center gap-3 text-[#c678dd] hover:text-[#a85ec4] transition-colors group">
              <span class="text-2xl group-hover:scale-110 transition-transform">üì±</span>
              <span class="font-mono">+62 812 3456 7890</span>
            </a>
            <a href="mailto:firdausnuurr@gmail.com" 
               class="flex items-center gap-3 text-[#e06c75] hover:text-[#c75663] transition-colors group">
              <span class="text-2xl group-hover:scale-110 transition-transform">‚úâÔ∏è</span>
              <span class="font-mono">firdausnuurr@gmail.com</span>
            </a>
          </div>

          <div class="flex flex-wrap gap-4 pt-4">
            <a href="/blog" class="inline-flex items-center gap-2 px-5 py-3 bg-black text-white font-bold border-3 border-black hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-1 transition-all">
              <span>üìù</span>
              <span>Read the Blog</span>
            </a>
            <a href="/projects" class="inline-flex items-center gap-2 px-5 py-3 bg-white text-black font-bold border-3 border-black hover:bg-[#FFD3B6] hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-1 transition-all">
              <span>üõ†Ô∏è</span>
              <span>View Projects</span>
            </a>
          </div>
        </div>
      </section>

      <!-- Latest Blog Posts -->
      <section class="mb-16 animate-fade-in-up" style="animation-delay: 0.15s;">
        <div class="flex items-center justify-between mb-6">
          <div class="inline-block px-6 py-2 bg-[#E8DFF5] border-3 border-black rounded-full shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
            <h2 class="text-2xl font-bold uppercase">Latest Blog Posts</h2>
          </div>
          <a href="/blog" class="inline-flex items-center gap-2 px-4 py-2 bg-white border-3 border-black font-bold hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-1 transition-all">
            <span>See All</span>
            <span>‚Üí</span>
          </a>
        </div>

        {latestPosts.length > 0 ? (
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            {latestPosts.map((post, index) => (
              <div class="animate-pop-in" style={`animation-delay: ${0.1 * index}s;`}>
                <BlogCard 
                  title={post.data.title}
                  description={post.data.description}
                  date={post.data.date}
                  author={post.data.author}
                  image={post.data.image}
                  tags={post.data.tags}
                  slug={post.slug}
                />
              </div>
            ))}
          </div>
        ) : (
          <div class="bg-white border-3 border-black p-6 text-center font-semibold">No posts published yet. Stay tuned!</div>
        )}
      </section>

      <!-- Latest Projects -->
      <section class="mb-16 animate-fade-in-up" style="animation-delay: 0.2s;">
        <div class="flex items-center justify-between mb-6">
          <div class="inline-block px-6 py-2 bg-[#A8E6CF] border-3 border-black rounded-full shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
            <h2 class="text-2xl font-bold uppercase">Latest Projects</h2>
          </div>
          <a href="/projects" class="inline-flex items-center gap-2 px-4 py-2 bg-white border-3 border-black font-bold hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-1 transition-all">
            <span>See All</span>
            <span>‚Üí</span>
          </a>
        </div>

        {latestProjects.length > 0 ? (
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            {latestProjects.map((project, index) => (
              <div class="animate-slide-in-right" style={`animation-delay: ${0.1 * index}s;`}>
                <ProjectCard 
                  title={project.data.title}
                  summary={project.data.summary}
                  category={project.data.category}
                  image={project.data.image}
                  tech={project.data.tech}
                  link={project.data.link}
                  github={project.data.github}
                  date={project.data.date}
                  slug={project.slug}
                />
              </div>
            ))}
          </div>
        ) : (
          <div class="bg-white border-3 border-black p-6 text-center font-semibold">No projects available yet.</div>
        )}
      </section>

      <!-- Education Section -->
      <section class="mb-16 animate-fade-in-up" style="animation-delay: 0.2s;">
        <div class="inline-block px-6 py-2 bg-[#C5B4E3] border-3 border-black rounded-full mb-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
          <h2 class="text-2xl font-bold uppercase">Education</h2>
        </div>
        
        <div class="space-y-4">
          {educationItems.map((edu, index) => (
            <div class="bg-white border-3 border-black p-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-1 transition-all animate-slide-in-left" style={`animation-delay: ${0.1 * index}s;`}>
              <div class="flex justify-between items-start flex-wrap gap-2 mb-2">
                <div>
                  <p class="text-[#e06c75] font-bold text-sm">
                    {new Date(edu.startDate).getFullYear()}‚Äì{edu.endDate ? new Date(edu.endDate).getFullYear() : "Present"}
                  </p>
                  <h3 class="text-xl font-bold">{edu.program}</h3>
                </div>
              </div>
              <p class="font-semibold">{edu.institution}</p>
              <p class="text-gray-600 text-sm">{edu.location}</p>
            </div>
          ))}
        </div>
      </section>

      <!-- Skills Section -->
      <section class="mb-16 animate-fade-in-up" style="animation-delay: 0.3s;">
        <div class="inline-block px-6 py-2 bg-[#D4F05D] border-3 border-black rounded-full mb-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
          <h2 class="text-2xl font-bold uppercase">Skills</h2>
        </div>
        
        <div class="flex flex-wrap gap-3">
          {['IoT Development', 'Django', 'Python', 'REST API', 'Computer Vision', 'YOLOv8', 'AWS', 'GCP', 'PostgreSQL', 'MySQL', 'MongoDB', 'Linux', 'Git', 'Docker'].map((skill, index) => (
            <span class="px-4 py-2 bg-white border-3 border-black rounded-full font-semibold hover:bg-[#E8F7A8] hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-1 transition-all cursor-default animate-pop-in" style={`animation-delay: ${0.05 * index}s;`}>
              {skill}
            </span>
          ))}
        </div>
      </section>

      <!-- Software Tools Section -->
      <section class="mb-16 animate-fade-in-up" style="animation-delay: 0.4s;">
        <div class="inline-block px-6 py-2 bg-[#FFD3B6] border-3 border-black rounded-full mb-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
          <h2 class="text-2xl font-bold uppercase">Software & Tools</h2>
        </div>
        
        <div class="grid grid-cols-3 sm:grid-cols-6 gap-4">
          {[
            { name: 'Python', icon: 'üêç' },
            { name: 'Django', icon: 'üé∏' },
            { name: 'Docker', icon: 'üê≥' },
            { name: 'AWS', icon: '‚òÅÔ∏è' },
            { name: 'Git', icon: 'üì¶' },
            { name: 'Linux', icon: 'üêß' }
          ].map((tool, index) => (
            <div class="bg-white border-3 border-black p-4 flex flex-col items-center justify-center gap-2 hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-1 transition-all animate-pop-in" style={`animation-delay: ${0.1 * index}s;`}>
              <span class="text-4xl">{tool.icon}</span>
              <span class="font-bold text-sm text-center">{tool.name}</span>
            </div>
          ))}
        </div>
      </section>

      <!-- Experience Section -->
      <section class="mb-16 animate-fade-in-up" style="animation-delay: 0.5s;">
        <div class="inline-block px-6 py-2 bg-[#A8E6CF] border-3 border-black rounded-full mb-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
          <h2 class="text-2xl font-bold uppercase">Experience</h2>
        </div>
        
        <div class="relative border-l-4 border-black pl-8 space-y-8">
          {experiences.map((exp, index) => (
            <div class="relative animate-slide-in-right" style={`animation-delay: ${0.1 * index}s;`}>
              <!-- Timeline dot -->
              <div class="absolute -left-[42px] top-0 w-8 h-8 bg-[#61afef] border-3 border-black rounded-full"></div>
              
              <div class="bg-white border-3 border-black p-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-1 transition-all">
                <div class="flex justify-between items-start flex-wrap gap-2 mb-3">
                  <div>
                    <p class="text-[#e06c75] font-bold text-sm">
                      {new Date(exp.startDate).toLocaleDateString('en-US', { month: 'short', year: 'numeric' })} ‚Äì 
                      {exp.endDate ? new Date(exp.endDate).toLocaleDateString('en-US', { month: 'short', year: 'numeric' }) : 'Present'}
                    </p>
                    <h3 class="text-xl font-bold">{exp.title}</h3>
                    <p class="text-[#61afef] font-semibold">{exp.company}</p>
                  </div>
                </div>
                <p class="text-gray-600 text-sm mb-3">{exp.location}</p>
                <ul class="space-y-2 mb-4">
                  {exp.responsibilities.map((resp) => (
                    <li class="flex gap-2">
                      <span class="text-[#98c379] font-bold">‚Üí</span>
                      <span>{resp}</span>
                    </li>
                  ))}
                </ul>
                <div class="flex flex-wrap gap-2">
                  {exp.tags.map((tag) => (
                    <span class="px-3 py-1 bg-[#E8F7A8] border-2 border-black text-xs font-bold rounded-full">
                      {tag}
                    </span>
                  ))}
                </div>
              </div>
            </div>
          ))}
        </div>
      </section>

      <!-- Certificates Section -->
      <section class="mb-16 animate-fade-in-up" style="animation-delay: 0.6s;">
        <div class="inline-block px-6 py-2 bg-[#A8D8EA] border-3 border-black rounded-full mb-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
          <h2 class="text-2xl font-bold uppercase">Certificates</h2>
        </div>
        
        <div class="bg-white border-3 border-black p-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
          <ul class="space-y-3">
            {certificates.map((cert, index) => (
              <li class="border-l-4 border-[#56b6c2] pl-4 hover:bg-[#F0F9FA] transition-colors animate-slide-in-left" style={`animation-delay: ${0.05 * index}s;`}>
                <strong class="text-[#56b6c2]">{cert.title}</strong>
                <br />
                <span class="text-gray-700">{cert.organization}</span>
                <span class="text-gray-500 text-sm ml-2">
                  ({new Date(cert.date).toLocaleDateString('en-US', { month: 'short', year: 'numeric' })})
                </span>
              </li>
            ))}
          </ul>
        </div>
      </section>

      <!-- Organizational Experience -->
      <section class="mb-16 animate-fade-in-up" style="animation-delay: 0.7s;">
        <div class="inline-block px-6 py-2 bg-[#C5B4E3] border-3 border-black rounded-full mb-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
          <h2 class="text-2xl font-bold uppercase">Leadership</h2>
        </div>
        
        <div class="bg-white border-3 border-black p-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
          <ul class="space-y-4">
            <li class="animate-slide-in-left" style="animation-delay: 0.1s;">
              <div class="flex justify-between items-start flex-wrap gap-2">
                <div>
                  <strong class="text-[#c678dd] text-lg">President, KARIMAH Al-Ittihad</strong>
                  <p class="text-gray-600">Bandung</p>
                </div>
                <span class="text-gray-500 font-mono text-sm">Mar 2023 ‚Äì Dec 2023</span>
              </div>
            </li>
            <li class="animate-slide-in-left" style="animation-delay: 0.2s;">
              <div class="flex justify-between items-start flex-wrap gap-2">
                <div>
                  <strong class="text-[#c678dd] text-lg">Member, Forum Dienul Islam</strong>
                  <p class="text-gray-600">Cimahi</p>
                </div>
                <span class="text-gray-500 font-mono text-sm">2018 ‚Äì 2021</span>
              </div>
            </li>
          </ul>
        </div>
      </section>

      <!-- CTA Section -->
      <section class="text-center py-12 animate-fade-in-up" style="animation-delay: 0.8s;">
        <div class="inline-block px-8 py-4 bg-[#98c379] border-3 border-black rounded-full shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] hover:shadow-[12px_12px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-1 transition-all">
          <a href="/api/download-cv" class="text-xl font-bold text-black">
            üìÑ Download Full CV
          </a>
        </div>
      </section>

    </div>

    <style>
      @keyframes fade-in {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      @keyframes slide-in-right {
        from {
          opacity: 0;
          transform: translateX(30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slide-in-left {
        from {
          opacity: 0;
          transform: translateX(-30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes fade-in-up {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes pop-in {
        0% {
          opacity: 0;
          transform: scale(0.8);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      @keyframes bounce-subtle {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      .animate-fade-in {
        animation: fade-in 0.8s ease-out forwards;
      }

      .animate-slide-in-right {
        animation: slide-in-right 0.8s ease-out forwards;
      }

      .animate-slide-in-left {
        animation: slide-in-left 0.8s ease-out forwards;
      }

      .animate-fade-in-up {
        animation: fade-in-up 0.8s ease-out forwards;
      }

      .animate-pop-in {
        animation: pop-in 0.6s ease-out forwards;
      }

      .animate-float {
        animation: float 3s ease-in-out infinite;
      }

      .animate-bounce-subtle {
        animation: bounce-subtle 2s ease-in-out infinite;
      }

      .border-3 {
        border-width: 3px;
      }
    </style>
  </body>
</html>
